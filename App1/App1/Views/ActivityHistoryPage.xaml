<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="App1.Views.ActivityHistoryPage"
             Title="Historia">
    <ContentPage.ToolbarItems>
        <ToolbarItem x:Name="leaderboardToolbar" Text="Ranking" Clicked="OnLeaderboardClicked" />
    </ContentPage.ToolbarItems>
    <StackLayout Padding="12" Spacing="10">

        <StackLayout Orientation="Horizontal" Spacing="8">
            <Picker x:Name="filterPicker" Title="Filtr typ" WidthRequest="140" SelectedItem="{Binding FilterType}">
                <Picker.Items>
                    <x:String>wszystkie</x:String>
                    <x:String>bieg</x:String>
                    <x:String>rower</x:String>
                    <x:String>spacer</x:String>
                </Picker.Items>
            </Picker>
            <Picker x:Name="sortPicker" Title="Sortowanie" WidthRequest="140" SelectedItem="{Binding SortOption}">
                <Picker.Items>
                    <x:String>data ⬇</x:String>
                    <x:String>data ⬆</x:String>
                    <x:String>dystans ⬇</x:String>
                    <x:String>dystans ⬆</x:String>
                </Picker.Items>
            </Picker>
            <Button x:Name="applyBtn" Text="Zastosuj" Command="{Binding ApplyCommand}" />
        </StackLayout>

        <Frame Padding="10" CornerRadius="8" BackgroundColor="#eef5ff">
            <StackLayout Orientation="Horizontal" Spacing="16">
                <StackLayout>
                    <Label x:Name="workoutsLabel" Text="Treningi" FontAttributes="Bold" />
                    <Label Text="{Binding TotalActivities}" />
                </StackLayout>
                <StackLayout>
                    <Label x:Name="distanceLabel" Text="Łączny dystans" FontAttributes="Bold" />
                    <Label Text="{Binding TotalDistance, StringFormat='{}{0:0.0} km'}" />
                </StackLayout>
                <StackLayout>
                    <Label x:Name="avgSpeedLabel" Text="Śr. prędkość" FontAttributes="Bold" />
                    <Label Text="{Binding AvgSpeed, StringFormat='{}{0:0.0} km/h'}" />
                </StackLayout>
            </StackLayout>
        </Frame>

        <CollectionView ItemsSource="{Binding Items}" SelectionMode="Single" SelectionChanged="OnSelectionChanged">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Padding="10" Margin="6" CornerRadius="6">
                        <StackLayout>
                            <Label Text="{Binding Name}" FontAttributes="Bold" />
                            <Label Text="{Binding StartTime, StringFormat='{0:dd.MM.yyyy HH:mm}'}" />
                            <Label>
                                <Label.Text>
                                    <Binding Path="DistanceKm" StringFormat="{}{0:0.00} km">
                                        <Binding.TargetNullValue>0.00 km</Binding.TargetNullValue>
                                    </Binding>
                                </Label.Text>
                            </Label>
                            <Label Text="{Binding Type}" FontAttributes="Bold" />
                            <Label Text="{Binding PaceText}" />
                        </StackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </StackLayout>
</ContentPage>

